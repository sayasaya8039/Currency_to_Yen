{"version":3,"file":"popup/popup.js","mappings":"mBAgEO,MCvDDA,EAAkC,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,OAqH5EC,SAASC,iBAAiB,mBAZ1BC,uBA/CAA,iBACE,MAAMC,EAAeH,SAASI,eAAe,gBAE7C,GAAKD,EAEL,IACE,MAAME,QAAiBC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,iBAE1D,GAAIJ,EAASK,QAAS,CACpB,MAAMC,EAAWN,EAASO,KAC1BT,EAAaU,QAAUF,EAASG,OAClC,CACF,CAAE,MAAOC,GACPC,QAAQC,MAAM,6BAA8BF,EAC9C,CACF,CAkCQG,SA3FRhB,iBACE,MAAMiB,EAAcnB,SAASI,eAAe,aACtCgB,EAAcpB,SAASI,eAAe,aAE5C,GAAKe,GAAgBC,EAErB,IACE,MAAMf,QAAiBC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,kBAE1D,IAAKJ,EAASK,QAEZ,YADAS,EAAYE,UAAY,+CAI1B,MAAM,MAAEC,EAAK,KAAEC,GAASlB,EAASO,KAG3BY,EAAYzB,EACf0B,OAAQC,GAASJ,EAAMI,IACvBC,IAAKD,IAGJ,MAAO,4EAEuBA,kDAnCnBE,EAgCEN,EAAMI,GA/BlB,IAAIG,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACtBC,OAAOC,KAAKC,MAAMR,yCALvB,IAAmBA,IAwCZS,KAAK,IAERlB,EAAYE,UAAYG,GAAa,yCACrCJ,EAAYkB,YAAc,QAAQf,GACpC,CAAE,MAAOR,GACPC,QAAQC,MAAM,8BAA+BF,GAC7CI,EAAYE,UAAY,iDAC1B,CACF,CAyDQkB,GAlBR,WACE,MAAMpC,EAAeH,SAASI,eAAe,gBAEzCD,GACFA,EAAaF,iBAAiB,SAAU,MAlB5CC,eAA4BS,GAC1B,UACQL,OAAOC,QAAQC,YAAY,CAC/BC,KAAM,eACNE,YAEJ,CAAE,MAAOI,GACPC,QAAQC,MAAM,6BAA8BF,EAC9C,CACF,CAUMyB,CAAa,CAAE1B,QAASX,EAAaU,WAG3C,CAaE4B,EACF,E","sources":["webpack://currency-to-yen/./src/types/currency.ts","webpack://currency-to-yen/./src/popup/popup.ts"],"sourcesContent":["/**\n * 通貨関連の型定義\n */\n\n/** サポートする通貨コード */\nexport type CurrencyCode =\n  | 'USD' | 'EUR' | 'GBP' | 'CNY' | 'KRW'\n  | 'AUD' | 'CAD' | 'CHF' | 'HKD' | 'SGD'\n  | 'TWD' | 'THB' | 'INR' | 'PHP' | 'MYR'\n  | 'JPY';\n\n/** 通貨シンボル情報 */\nexport interface CurrencySymbol {\n  symbol: string;\n  code: CurrencyCode;\n  position: 'prefix' | 'suffix';\n}\n\n/** 検出された通貨情報 */\nexport interface DetectedCurrency {\n  code: CurrencyCode;\n  amount: number;\n  originalText: string;\n  startIndex: number;\n  endIndex: number;\n}\n\n/** 為替レートレスポンス */\nexport interface ExchangeRateResponse {\n  amount: number;\n  base: string;\n  date: string;\n  rates: Record<string, number>;\n}\n\n/** キャッシュされた為替レート */\nexport interface CachedRates {\n  rates: Record<CurrencyCode, number>;\n  date: string;\n  fetchedAt: number;\n}\n\n/** 拡張機能の設定 */\nexport interface ExtensionSettings {\n  enabled: boolean;\n  showOriginalAmount: boolean;\n  tooltipDelay: number;\n}\n\n/** メッセージタイプ */\nexport type MessageType =\n  | { type: 'GET_EXCHANGE_RATE'; currency: CurrencyCode }\n  | { type: 'GET_ALL_RATES' }\n  | { type: 'GET_SETTINGS' }\n  | { type: 'SET_SETTINGS'; settings: Partial<ExtensionSettings> };\n\n/** メッセージレスポンス */\nexport interface MessageResponse<T = unknown> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\n/** 通貨シンボルマッピング */\nexport const CURRENCY_SYMBOLS: CurrencySymbol[] = [\n  { symbol: '$', code: 'USD', position: 'prefix' },\n  { symbol: '€', code: 'EUR', position: 'prefix' },\n  { symbol: '£', code: 'GBP', position: 'prefix' },\n  { symbol: '¥', code: 'CNY', position: 'prefix' },\n  { symbol: '₩', code: 'KRW', position: 'prefix' },\n  { symbol: 'US$', code: 'USD', position: 'prefix' },\n  { symbol: 'HK$', code: 'HKD', position: 'prefix' },\n  { symbol: 'AU$', code: 'AUD', position: 'prefix' },\n  { symbol: 'CA$', code: 'CAD', position: 'prefix' },\n  { symbol: 'SG$', code: 'SGD', position: 'prefix' },\n  { symbol: 'A$', code: 'AUD', position: 'prefix' },\n  { symbol: 'C$', code: 'CAD', position: 'prefix' },\n];\n\n/** 通貨コード表示名（日本語） */\nexport const CURRENCY_NAMES: Record<CurrencyCode, string> = {\n  USD: '米ドル',\n  EUR: 'ユーロ',\n  GBP: '英ポンド',\n  CNY: '中国元',\n  KRW: '韓国ウォン',\n  AUD: '豪ドル',\n  CAD: 'カナダドル',\n  CHF: 'スイスフラン',\n  HKD: '香港ドル',\n  SGD: 'シンガポールドル',\n  TWD: '台湾ドル',\n  THB: 'タイバーツ',\n  INR: 'インドルピー',\n  PHP: 'フィリピンペソ',\n  MYR: 'マレーシアリンギット',\n  JPY: '日本円',\n};\n\n/** デフォルト設定 */\nexport const DEFAULT_SETTINGS: ExtensionSettings = {\n  enabled: true,\n  showOriginalAmount: true,\n  tooltipDelay: 200,\n};\n","/**\n * ポップアップスクリプト\n * 拡張機能のON/OFFと為替レート表示\n */\n\nimport type { CurrencyCode, CachedRates, ExtensionSettings } from '../types/currency';\nimport { CURRENCY_NAMES } from '../types/currency';\n\n/** 表示する主要通貨 */\nconst MAIN_CURRENCIES: CurrencyCode[] = ['USD', 'EUR', 'GBP', 'CNY', 'KRW', 'AUD'];\n\n/**\n * 金額をフォーマット（日本円）\n */\nfunction formatYen(amount: number): string {\n  return new Intl.NumberFormat('ja-JP', {\n    style: 'currency',\n    currency: 'JPY',\n    maximumFractionDigits: 0,\n  }).format(Math.round(amount));\n}\n\n/**\n * 為替レートを表示\n */\nasync function loadRates(): Promise<void> {\n  const ratesListEl = document.getElementById('ratesList');\n  const ratesDateEl = document.getElementById('ratesDate');\n\n  if (!ratesListEl || !ratesDateEl) return;\n\n  try {\n    const response = await chrome.runtime.sendMessage({ type: 'GET_ALL_RATES' });\n\n    if (!response.success) {\n      ratesListEl.innerHTML = '<div class=\"rates-loading\">エラーが発生しました</div>';\n      return;\n    }\n\n    const { rates, date } = response.data as CachedRates;\n\n    // レートリストを生成\n    const ratesHtml = MAIN_CURRENCIES\n      .filter((code) => rates[code])\n      .map((code) => {\n        const name = CURRENCY_NAMES[code] || code;\n        const rate = rates[code];\n        return `\n          <div class=\"rate-item\">\n            <span class=\"rate-code\">${code}</span>\n            <span class=\"rate-value\">${formatYen(rate)}</span>\n          </div>\n        `;\n      })\n      .join('');\n\n    ratesListEl.innerHTML = ratesHtml || '<div class=\"rates-loading\">データなし</div>';\n    ratesDateEl.textContent = `更新日: ${date}`;\n  } catch (err) {\n    console.error('[Currency to Yen] レート取得エラー:', err);\n    ratesListEl.innerHTML = '<div class=\"rates-loading\">データを取得できませんでした</div>';\n  }\n}\n\n/**\n * 設定を読み込んでUIに反映\n */\nasync function loadSettings(): Promise<void> {\n  const enableToggle = document.getElementById('enableToggle') as HTMLInputElement;\n\n  if (!enableToggle) return;\n\n  try {\n    const response = await chrome.runtime.sendMessage({ type: 'GET_SETTINGS' });\n\n    if (response.success) {\n      const settings = response.data as ExtensionSettings;\n      enableToggle.checked = settings.enabled;\n    }\n  } catch (err) {\n    console.error('[Currency to Yen] 設定取得エラー:', err);\n  }\n}\n\n/**\n * 設定を保存\n */\nasync function saveSettings(settings: Partial<ExtensionSettings>): Promise<void> {\n  try {\n    await chrome.runtime.sendMessage({\n      type: 'SET_SETTINGS',\n      settings,\n    });\n  } catch (err) {\n    console.error('[Currency to Yen] 設定保存エラー:', err);\n  }\n}\n\n/**\n * イベントリスナーを設定\n */\nfunction setupEventListeners(): void {\n  const enableToggle = document.getElementById('enableToggle') as HTMLInputElement;\n\n  if (enableToggle) {\n    enableToggle.addEventListener('change', () => {\n      saveSettings({ enabled: enableToggle.checked });\n    });\n  }\n}\n\n/**\n * 初期化\n */\nasync function initialize(): Promise<void> {\n  // 設定を読み込み\n  await loadSettings();\n\n  // 為替レートを読み込み\n  await loadRates();\n\n  // イベントリスナーを設定\n  setupEventListeners();\n}\n\n// DOMContentLoaded で初期化\ndocument.addEventListener('DOMContentLoaded', initialize);\n"],"names":["MAIN_CURRENCIES","document","addEventListener","async","enableToggle","getElementById","response","chrome","runtime","sendMessage","type","success","settings","data","checked","enabled","err","console","error","loadSettings","ratesListEl","ratesDateEl","innerHTML","rates","date","ratesHtml","filter","code","map","amount","Intl","NumberFormat","style","currency","maximumFractionDigits","format","Math","round","join","textContent","loadRates","saveSettings","setupEventListeners"],"ignoreList":[],"sourceRoot":""}